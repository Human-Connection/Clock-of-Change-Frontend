!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=0)}([function(e,t){window.coc=function(e,t,a){var n={},r=a(".coc-form-overlay"),o="Mensch",c=a(".user-image"),s=a("#user-message"),l=0,u=0,d=null,g=!1,m=0,f=[];f.hair=0,f.eyebrow=0,f.eyes=0,f.nose=0,f.mouth=0,f.facialHair=0,f.clothing=0;var p=[];p.firstname="coc-firstname",p.lastname="coc-lastname",p.email="coc-email",p.message="coc-message",p.country="coc-country",p.anon="coc-anon",p.beta="coc-register-beta",p.nl="coc-register-nl",p.pr="coc-register-privacy",p.age="coc-register-age",p.slogan="coc-slogan",p.file="coc-add-avatar",p.error="form-error";var h=function(e){var r=a(this).data("message"),c=a(this).data("uname"),i=a(this).data("anon"),u=a(this).attr("src"),d=this.parentElement,g=a(this).data("country");l=function(e,t){var a,n=t.length;for(a=0;a<n;a++)if(t[a]===e)return a;return-1}(d,t.getElementsByClassName("user-item")),s.find(".user-message-image").attr("src",u),void 0!==i&&1===i&&(c=o),s.find(".message-name").text(c),s.find(".message-text").text(r),n.loadCountryFlagImage(g),s.show()};return n.ownImageChangeHandler=function(){var e=this;a("#ownImageUpload").on("change",(function(t){if(t.target.files&&t.target.files[0]){d=t.target.files;var n=new FileReader;n.onload=function(e){a("#coc-image").attr("src",e.target.result).width(200).height(200)},n.readAsDataURL(t.target.files[0]),g=!0}a(e).val("")})),a("#customUploadWrap").on("click",(function(e){a("#ownImageUpload").trigger("click"),g=!0,e.preventDefault()}))},n.init=function(){n.loadCountries();var r=t.querySelector(".display .digits");r&&(u=r.getAttribute("data-amount"));var i=3e4;e.location.pathname&&e.location.pathname.includes("/en/")&&(i=1),e.setTimeout(n.updateCounter,i),a("#joinCoC").click((function(e){n.toggleForm(),e.preventDefault()})),a(".coc-form-close").click((function(){n.toggleForm()})),a("#joinNowBtn").click((function(t){t.preventDefault(),Object.values(p).forEach((function(e){a("#"+e)&&a("#"+e).removeClass("input-error")})),a(".form-error-hint").remove();var r=new FormData,o=a("#coc-email"),c=a("#coc-message"),s=a("#coc-firstname"),i=a("#coc-register-privacy")[0].checked;!0===g?null!=d&&r.append("image",d[0]):r.append("imageUrl",a("#coc-image").attr("src")),r.append("firstname",s.val()),r.append("lastname",a("#coc-lastname").val()),r.append("email",o.val()),r.append("message",c.val()),r.append("country",a("#coc-country").val()),r.append("anon",a("#coc-anon")[0].checked),r.append("beta","0"),r.append("nl",a("#coc-register-nl")[0].checked),r.append("age",a("#coc-register-age")[0].checked),r.append("slogan",a("#coc-slogan")[0].checked),r.append("pr",i),a.urlParam=function(t){var a=new RegExp("[?&]"+t+"=([^&#]*)").exec(e.location.search);return null==a?0:a[1]||0},r.append("pax",a.urlParam("pax")),a.ajax({url:cocVars.ajax_url+"coc/v2/createEntry/",method:"POST",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",cocVars.nonce)},success:function(t){null!==t&&!0===t.success?(new PNotify({title:n.t("successNotificationTitle","Das hat geklappt!"),text:n.t("successNotificationMessage","DANKE, dass DU dabei bist. JEDER EINZELNE ZÄHLT! Bitte bestätige jetzt Deine Emailadresse."),addclass:"stack-bottomright",stack:{dir1:"up",dir2:"left",push:"top"}}),n.toggleForm(),setTimeout((function(){e.location.reload()}),3e3)):(null!==t&&Object.keys(t).forEach((function(e){"success"===e&&"error"===e||a("#"+p[e])&&(a("#"+p[e]).addClass("input-error"),(a("#"+p[e]).next().length?a("#"+p[e]).next():a("#"+p[e])).after('<p class="form-error-hint">'+t[e]+"</p>"))})),new PNotify({title:n.t("errorNotificationTitle","Ups! Das geht schief!"),text:n.t("errorNotificationMessage","Bitte probiere es erneut!"),addclass:"stack-bottomright",stack:{dir1:"up",dir2:"left",push:"top"}}))},data:r,cache:!1,dataType:"json",processData:!1,contentType:!1})})),a(".user-image").on("click",h),a(".close-wrapper").find(".fa-times").on("click",(function(){s.hide()})),a("#loadMore").on("click",(function(e){m+=1;var t={};t.offset=m,t.profileImage=a("#profileImage").prop("checked")?1:0,t.orderByDate="asc"===a("#orderByDate").val()?"asc":"desc",t.country=a("#filterByCountry").val(),a.ajax({url:cocVars.ajax_url+"coc/v2/getEntries/?"+a.param(t),method:"GET",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",cocVars.nonce)},success:function(e){if(e.length<81&&a("#loadMore").hide(),e.length>0){for(var t=0;t<e.length;t++){var n=e[t],r=n.firstname,o=n.message,s=""===n.image?cocVars.homeUrl+"/wp-content/plugins/coc/assets/images/coc-placeholder.jpg":n.image,i=n.country,l='<img class="user-image" data-anon="'+n.anon+'" data-uname="'+r+'" data-message="'+o+'" data-country="'+i+'" style="width:100%;margin-top:5px;" alt="signer-image" src="'+s+'" />';a(".user-container").append('<div class="user-item">'+l+"</div>"),c.push(l)}a(".user-image").on("click",h)}else a("#loadMore").hide()},cache:!1}),e.preventDefault()})),a("#profileImage, #orderByDate, #filterByCountry").on("change",(function(e){var t={};t.profileImage=a("#profileImage").prop("checked")?1:0,t.orderByDate="asc"===a("#orderByDate").val()?"asc":"desc",t.country=a("#filterByCountry").val(),a.ajax({url:cocVars.ajax_url+"coc/v2/getEntries/?"+a.param(t),method:"GET",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",cocVars.nonce)},success:function(e){if(e.length<81&&a("#loadMore").hide(),e.length>0){a(".user-container").html("");for(var t=0;t<e.length;t++){var n=e[t],r=n.firstname,o=n.message,s=""===n.image?cocVars.homeUrl+"/wp-content/plugins/coc/assets/images/coc-placeholder.jpg":n.image,i=n.country,l='<img class="user-image loaded" data-anon="'+n.anon+'" data-uname="'+r+'" data-message="'+o+'" data-country="'+i+'" style="width:100%;margin-top:5px;" alt="signer-image" src="'+s+'" />';a(".user-container").append('<div class="user-item">'+l+"</div>"),c.push(l)}a(".user-image").on("click",h)}else a("#loadMore").hide()},cache:!1}),e.preventDefault()})),a("#prevMessage").on("click",n.prevMessage),a("#nextMessage").on("click",n.nextMessage),n.ownImageChangeHandler(),a("#country-rankings-load-more .load-more-link").on("click",(function(e){e.preventDefault(),a(".country-ranking-item.hidden").slice(0,12).each((function(e,t){a(t).removeClass("hidden")})),0===a(".country-ranking-item.hidden").length&&a("#country-rankings-load-more").hide(),setTimeout((function(){a([t.documentElement,t.body]).animate({scrollTop:a("#country-rankings-load-more").offset().top},1e3)}),150)})),o=n.t("defaultEntryName","Mensch");var l=t.getElementsByClassName("close-wrapper"),f=t.getElementsByClassName("user-message-text");f.length>0&&l.length>0&&f[0].prepend(l[0]);var v=t.querySelector("#coc-message");v&&v.length>0&&v.addEventListener("input",(function(e){var a=e.target.value;t.getElementById("messageCounter").textContent=a.length+"/500"}))},a(e).off("keyup").on("keyup",(function(e){27===e.which&&(n.closeForm(),n.closeUserOverlay()),37===e.which&&n.prevMessage(),39===e.which&&n.nextMessage()})),n.toggleForm=function(){"block"===r.css("display")?r.hide():r.show()},n.resetForm=function(){},n.closeForm=function(){r.hide()},n.resetForm=function(){},n.closeUserOverlay=function(){s.hide()},n.loadCountryFlagImage=function(e){var t=s.find(".message-country");if(t.html(""),2===e.length){var a=cocVars.homeUrl+"/wp-content/plugins/coc/assets/images/flags/"+e.toLowerCase()+".png",r=n.getCountryNameByCountryCode(e),o=n.t("entryIsFrom","Eintrag kommt aus");t.addClass("loaded"),t.html('<img src="'+a+'" title="'+o+" "+r+'" alt="'+o+" "+r+'" height="35">')}},n.loadCountries=function(){var e="countries_en.json";void 0!==cocVars.language&&"de"===cocVars.language&&(e="countries_de.json"),a.getJSON(cocVars.homeUrl+"/wp-content/plugins/coc/assets/translation/"+e,(function(e){n.countries=e}))},n.getCountryNameByCountryCode=function(e){return e.toUpperCase(),n.countries&&e in n.countries?n.countries[e]:""},n.translate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return cocVars.translation&&void 0!==cocVars.translation[e]&&""!==cocVars.translation[e]?cocVars.translation[e]:t},n.t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n.translate(e,t)},n.updateCounter=function(){var r=["zero","one","two","three","four","five","six","seven","eight","nine"];a.ajax({url:cocVars.ajax_url+"coc/v2/getCount",method:"GET",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",cocVars.nonce)},success:function(e){var a=Number.parseInt(e);if(a>0&&Number.parseInt(u)>0&&a!==Number.parseInt(u)){var n=a.toString().padStart(8,"0"),o=t.querySelectorAll(".digits .number");for(i=0;i<o.length;i++)o[i].firstChild.className=r[n[i]]}},cache:!1}),e.setTimeout(n.updateCounter,3e4)},n.prevMessage=function(){l<=0?l=c.length-1:l--;var e=a(c[l]),t=e.data("message");s.find(".user-message-image").attr("src",e[0].src),s.find(".message-text").text(t);var r=e.data("uname");1===e.data("anon")&&(r=o),s.find(".message-name").text(r);var i=e.data("country");n.loadCountryFlagImage(i)},n.nextMessage=function(){l>=c.length-1?l=0:l++;var e=a(c[l]),t=e.data("message");s.find(".user-message-image").attr("src",e[0].src),s.find(".message-text").text(t);var r=e.data("uname");1===e.data("anon")&&(r=o),s.find(".message-name").text(r);var i=e.data("country");n.loadCountryFlagImage(i)},a(t).ready(n.init),n}(window,document,jQuery)}]);